(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{76489:function(e,t){"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var o={},i=e.split(";"),n=(t||{}).decode||r,s=0;s<i.length;s++){var a=i[s],c=a.indexOf("=");if(!(c<0)){var l=a.substring(0,c).trim();if(void 0==o[l]){var d=a.substring(c+1,a.length).trim();'"'===d[0]&&(d=d.slice(1,-1)),o[l]=function(e,t){try{return t(e)}catch(t){return e}}(d,n)}}}return o},t.serialize=function(e,t,r){var n=r||{},s=n.encode||o;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var a=s(t);if(a&&!i.test(a))throw TypeError("argument val is invalid");var c=e+"="+a;if(null!=n.maxAge){var l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(l)}if(n.domain){if(!i.test(n.domain))throw TypeError("option domain is invalid");c+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw TypeError("option path is invalid");c+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw TypeError("option expires is invalid");c+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(c+="; HttpOnly"),n.secure&&(c+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"none":c+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return c};var r=decodeURIComponent,o=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},47041:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)0>t.indexOf(o[i])&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(r[o[i]]=e[o[i]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.checkCookies=t.hasCookie=t.removeCookies=t.deleteCookie=t.setCookies=t.setCookie=t.getCookie=t.getCookies=void 0;var n=r(76489),isClientSide=function(){return"undefined"!=typeof window},stringify=function(e){void 0===e&&(e="");try{var t=JSON.stringify(e);return/^[\{\[]/.test(t)?t:e}catch(t){return e}};t.getCookies=function(e){if(e&&(t=e.req),!isClientSide())return t&&t.cookies?t.cookies:t&&t.headers&&t.headers.cookie?(0,n.parse)(t.headers.cookie):{};for(var t,r={},o=document.cookie?document.cookie.split("; "):[],i=0,s=o.length;i<s;i++){var a=o[i].split("="),c=a.slice(1).join("=");r[a[0]]=c}return r},t.getCookie=function(e,r){var o,i=(0,t.getCookies)(r)[e];if(void 0!==i)return"true"===(o=i?i.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):i)||"false"!==o&&("undefined"!==o?"null"===o?null:o:void 0)},t.setCookie=function(e,t,r){if(r){var s,a,c,l=r.req,d=r.res,u=i(r,["req","res"]);a=l,c=d,s=u}var p=(0,n.serialize)(e,stringify(t),o({path:"/"},s));if(isClientSide())document.cookie=p;else if(c&&a){var f=c.getHeader("Set-Cookie");if(Array.isArray(f)||(f=f?[String(f)]:[]),c.setHeader("Set-Cookie",f.concat(p)),a&&a.cookies){var h=a.cookies;""===t?delete h[e]:h[e]=stringify(t)}if(a&&a.headers&&a.headers.cookie){var h=(0,n.parse)(a.headers.cookie);""===t?delete h[e]:h[e]=stringify(t),a.headers.cookie=Object.entries(h).reduce(function(e,t){return e.concat("".concat(t[0],"=").concat(t[1],";"))},"")}}},t.setCookies=function(e,r,o){return console.warn("[WARN]: setCookies was deprecated. It will be deleted in the new version. Use setCookie instead."),(0,t.setCookie)(e,r,o)},t.deleteCookie=function(e,r){return(0,t.setCookie)(e,"",o(o({},r),{maxAge:-1}))},t.removeCookies=function(e,r){return console.warn("[WARN]: removeCookies was deprecated. It will be deleted in the new version. Use deleteCookie instead."),(0,t.deleteCookie)(e,r)},t.hasCookie=function(e,r){return!!e&&(0,t.getCookies)(r).hasOwnProperty(e)},t.checkCookies=function(e,r){return console.warn("[WARN]: checkCookies was deprecated. It will be deleted in the new version. Use hasCookie instead."),(0,t.hasCookie)(e,r)}},36429:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(37644)}])},98814:function(e,t,r){"use strict";r.d(t,{Z:function(){return Loader}});var o=r(82729),i=r(85893),n=r(67294),s=r(19890),a=r(18498),c=r.n(a);function _templateObject(){let e=(0,o._)(["\n  display: flex;\n  margin: 0 auto;\n  border-color: white;\n  padding: 20px;\n"]);return _templateObject=function(){return e},e}let l=(0,s.css)(_templateObject());function Loader(e){let{loading:t,colorParam:r,sizeParam:o}=e,[s,a]=(0,n.useState)("#fff"),[d,u]=(0,n.useState)(10);return(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)(c(),{color:r||s,css:l,loading:t,size:o||d})})}},37644:function(e,t,r){"use strict";r.r(t);var o=r(85893),i=r(9669),n=r.n(i),s=r(47041),a=r(41664),c=r.n(a),l=r(11163),d=r(67294),u=r(86501),p=r(98814),f=r(81845),h=r(47211);t.default=()=>{let[e,t]=(0,d.useState)(""),[r,i]=(0,d.useState)(""),[a,m]=(0,d.useState)(!1),{state:{user:g},dispatch:y}=(0,d.useContext)(h._),v=(0,l.useRouter)();(0,d.useEffect)(()=>{g?v.push("/"):window.localStorage.removeItem("user")},[g,v]);let updateUserAuth=async()=>{try{let{data:e}=await n().post("/api/update-user-auth")}catch(e){console.log(e)}},handleSubmit=async t=>{t.preventDefault(),m(!0);try{let{data:t}=await n().post("/api/login",{email:e,password:r});m(!1),y({type:"LOGIN",payload:t}),(0,s.setCookie)("token",t.token),window.localStorage.setItem("user",JSON.stringify(t)),updateUserAuth();let o=new URLSearchParams(window.location.search),i=o.get("redirect");i?v.push("".concat(i,"?signIn=true")):t.role.includes("Admin")?v.push("/admin?signIn=true"):v.push("/user?signIn=true")}catch(e){m(!1),console.log("Error",e),u.ZP.error(e.response.data)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.Z,{title:"Dugsiiye Login"}),(0,o.jsx)("div",{className:"min-h-screen py-24 px-10",children:(0,o.jsxs)("div",{className:"p-10 md:w-3/4 lg:w-1/3 mx-auto rounded-md bg-white shadow-2xl",children:[(0,o.jsxs)("form",{action:"",onSubmit:handleSubmit,children:[(0,o.jsxs)("div",{className:"mb-5",children:[(0,o.jsx)("label",{htmlFor:"",className:"block mb-2 font-bold text-gray-600",children:"Email"}),(0,o.jsx)("input",{type:"email",name:"",id:"",className:"border border-gray-300 p-3 rounded-md shadow w-full border-transparent focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent",placeholder:"person@gmail.com",onChange:e=>t(e.target.value),value:e})]}),(0,o.jsxs)("div",{className:"mb-5",children:[(0,o.jsx)("label",{htmlFor:"",className:"block mb-2 font-bold text-gray-600",children:"Password"}),(0,o.jsx)("input",{type:"password",name:"",id:"",placeholder:"",className:"border border-gray-300 p-3 rounded-md shadow w-full border-transparent focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent",onChange:e=>i(e.target.value),value:r})]}),(0,o.jsx)("button",{type:"submit",className:"rounded shadow-lg bg-primary-800 text-white w-full py-3  hover:bg-primary-800 text-base disabled:py-0 disabled:bg-primary-300 disabled:cursor-not-allowed",disabled:a,children:a?(0,o.jsx)("div",{className:"flex justify-center items-center",children:(0,o.jsx)(p.Z,{loading:a})}):"Login"})]}),(0,o.jsxs)("p",{className:"text-center p-4",children:["I don't have account !",(0,o.jsx)(c(),{href:"/register",children:(0,o.jsxs)("span",{className:"text-primary-700",children:["   ","Register"]})})]}),(0,o.jsx)("p",{className:"text-center px-4",children:(0,o.jsx)(c(),{href:"/forget_password",children:(0,o.jsxs)("span",{className:"text-primary-500",children:["   ","Forget Password"]})})})]})})]})}},82729:function(e,t,r){"use strict";function _tagged_template_literal(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}r.d(t,{_:function(){return _tagged_template_literal}})}},function(e){e.O(0,[8498,9774,2888,179],function(){return e(e.s=36429)}),_N_E=e.O()}]);