"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8768],{98814:function(e,t,r){r.d(t,{Z:function(){return Loader}});var a=r(82729),s=r(85893),l=r(67294),n=r(19890),o=r(18498),i=r.n(o);function _templateObject(){let e=(0,a._)(["\n  display: flex;\n  margin: 0 auto;\n  border-color: white;\n  padding: 20px;\n"]);return _templateObject=function(){return e},e}let d=(0,n.css)(_templateObject());function Loader(e){let{loading:t,colorParam:r,sizeParam:a}=e,[n,o]=(0,l.useState)("#fff"),[c,u]=(0,l.useState)(10);return(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(i(),{color:r||n,css:d,loading:t,size:a||c})})}},38768:function(e,t,r){r.d(t,{Z:function(){return OrderList}});var a=r(85893),s=r(67294),l=r(9669),n=r.n(l),o=r(86501),i=r(11355),d=r(80100),c=r(5506),u=r(68715),m=r(98814);function OderStatuModal(e){let{open:t,setOpen:r,currentOrderStatus:l,setCurrentOrderStatus:n,handleOrderStatus:o,loading:h,selectedPlane:x,setSelectedPlane:p,price:f,setPrice:g}=e,b=(0,s.useRef)(null);return(0,a.jsx)(i.u.Root,{show:t,as:s.Fragment,children:(0,a.jsx)(d.V,{as:"div",static:!0,className:"fixed z-50 inset-0 overflow-y-auto",open:t,onClose:r,initialFocus:b,children:(0,a.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)(i.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(d.V.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,a.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),(0,a.jsx)(i.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-10",children:[(0,a.jsx)("div",{className:"hidden sm:block absolute top-0 right-0 pt-4 pr-4",children:(0,a.jsxs)("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>r(!1),children:[(0,a.jsx)("span",{className:"sr-only",children:"Close"}),(0,a.jsx)(c.Z,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,a.jsx)("div",{className:"rounded-md bg-green-50 p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Order Action"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,a.jsxs)("p",{children:["Hadii Qof Lacag Aan Bixin aad u furayso Tusaale qof free aan ku siinay price-ka geli ",(0,a.jsx)("strong",{children:"-1"})," hadii kale geli lacagta aad ka qaaday"]})})]})]})}),(0,a.jsxs)("form",{onSubmit:o,children:[(0,a.jsx)("div",{className:"sm:flex sm:items-start w-full",children:(0,a.jsx)("div",{className:"sm:col-span-6 w-full p-1",children:(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 p-2",children:"Price"}),(0,a.jsx)("input",{type:"number",name:"",id:"",className:"shadow-sm focus:ring-primary-500 focus:border-primary-700 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Enter The Price...",onChange:e=>g(e.target.value),value:f})]})})}),(0,a.jsx)("div",{className:"sm:flex sm:items-start w-full",children:(0,a.jsxs)("div",{className:"sm:col-span-6 w-full p-1",children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-sm text-gray-700 p-2",children:"Order Status"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("select",{id:"category",name:"category",autoComplete:"category",className:"shadow-sm focus:ring-primary-500 focus:border-primary-700 block w-full sm:text-sm border-gray-300 rounded-md",onChange:e=>n(e.target.value),value:l,children:[(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"}),(0,a.jsx)("option",{value:"Processing",children:"Processing"}),(0,a.jsx)("option",{value:"Canceled",children:"Canceled"})]})})]})}),(0,a.jsx)("div",{className:"".concat("Completed"==l?"":"hidden"," sm:flex sm:items-start w-full"),children:(0,a.jsxs)("div",{className:"sm:col-span-6 w-full p-1",children:[(0,a.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Duration"}),(0,a.jsxs)("select",{id:"location",name:"location",className:"mt-1 mb-4 block w-full pl-  py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",defaultValue:"7",onChange:e=>p(e.target.value),value:x,children:[(0,a.jsx)("option",{value:"7",children:"1 Week"}),(0,a.jsx)("option",{value:"30",children:"1 Month"}),(0,a.jsx)("option",{value:"60",children:"2 Month"}),(0,a.jsx)("option",{value:"90",children:"3 Month"}),(0,a.jsx)("option",{value:"120",children:"4 Month"}),(0,a.jsx)("option",{value:"150",children:"5 Month"}),(0,a.jsx)("option",{value:"180",children:"6 Month"}),(0,a.jsx)("option",{value:"210",children:"7 Month"}),(0,a.jsx)("option",{value:"240",children:"8 Month"}),(0,a.jsx)("option",{value:"270",children:"9 Month"}),(0,a.jsx)("option",{value:"300",children:"10 Month"}),(0,a.jsx)("option",{value:"330",children:"11 Month"}),(0,a.jsx)("option",{value:"360",children:"12 Month"}),(0,a.jsx)("option",{value:"36000000000",children:"Life Time Access"})]})]})}),(0,a.jsx)("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:(0,a.jsx)("button",{type:"submit",className:"mt-3 w-full inline-flex justify-center rounded-md shadow-sm px-4 py-2 bg-primary-500 text-base font-medium text-white hover:bg-primary-800  sm:mt-0 sm:w-auto sm:text-sm disabled:px-6  disabled:py-0 disabled:bg-primary-300",ref:b,disabled:h,children:h?(0,a.jsx)(m.Z,{loading:h}):"Update Order Status"})})]})]})})]})})})}var h=r(37051),x=r(53737),p=r(22006);let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,p.cn)("w-full caption-bottom text-sm",r),...s})})});f.displayName="Table";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,p.cn)("[&_tr]:border-b",r),...s})});g.displayName="TableHeader";let b=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,p.cn)("[&_tr:last-child]:border-0",r),...s})});b.displayName="TableBody";let y=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,p.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})});y.displayName="TableFooter";let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,p.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});v.displayName="TableRow";let j=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,p.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});j.displayName="TableHead";let N=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,p.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});N.displayName="TableCell";let w=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,p.cn)("mt-4 text-sm text-muted-foreground",r),...s})});w.displayName="TableCaption";var C=r(44675),S=r(74094),k=r(27060);function OrderList(e){var t;let{orders:r,updated:l,setUpdated:i,admin:d}=e,[c,u]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[y,w]=(0,s.useState)(""),[M,P]=(0,s.useState)(""),[R,O]=(0,s.useState)(""),[T,F]=(0,s.useState)(""),showModal=(e,t,r,a)=>{u(!0),w(e),P(t),O(r),F(a)},[_,z]=(0,s.useState)("7"),[Z,V]=(0,s.useState)(null),handleOrderStatus=async e=>{if(e.preventDefault(),!Z)return o.ZP.error("please enter a price");try{p(!0);let{data:e}=await n().post("/api/courses/update-order-status",{orderId:M,orderUserId:R,OrderStatus:y,courseId:T,expire_date:_,price:Z});p(!1),o.ZP.success("Updated Successfully"),u(!1),i(!l)}catch(e){p(!1),o.ZP.error("Something went wrong..."),console.log("err for handle order status",e)}},L=(0,s.useMemo)(()=>[{accessorKey:"createdAt",header:"Date",cell:e=>{let{row:t}=e,r=new Date(t.getValue("createdAt"));return r.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},{accessorKey:"course.name",header:"Course"},{accessorKey:"user.email",header:"User"},{accessorKey:"user.phone",header:"User"},{accessorKey:"price",header:"Total",cell:e=>{let{row:t}=e;return"$".concat(t.getValue("price").toFixed(2))}},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e;return(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("Completed"===t.getValue("status")?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t.getValue("status")})}},d&&{id:"actions",cell:e=>{let{row:t}=e;return(0,a.jsx)(C.z,{onClick:()=>showModal(t.original.status,t.original._id,t.original.user._id,t.original.course._id),variant:"ghost",className:"hover:bg-gray-100",children:(0,a.jsx)(h.Z,{className:"w-5 h-5"})})}}].filter(Boolean),[d]),[D,A]=(0,s.useState)(""),K=(0,S.b7)({data:r,columns:L,getCoreRowModel:(0,k.sC)(),getPaginationRowModel:(0,k.G_)(),getSortedRowModel:(0,k.tj)(),getFilteredRowModel:(0,k.vL)(),state:{globalFilter:D},onGlobalFilterChange:A});return(0,a.jsxs)("div",{className:"p-6 bg-gray-100 rounded-md",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search orders...",value:null!=D?D:"",onChange:e=>A(e.target.value),className:"w-full max-w-md pl-10 pr-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-gray-400"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-md shadow-md overflow-hidden border border-gray-200",children:(0,a.jsxs)(f,{children:[(0,a.jsx)(g,{children:K.getHeaderGroups().map(e=>(0,a.jsx)(v,{children:e.headers.map(e=>(0,a.jsx)(j,{className:"bg-gray-50 font-semibold text-gray-700 py-4",children:e.isPlaceholder?null:(0,S.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(b,{children:(null===(t=K.getRowModel().rows)||void 0===t?void 0:t.length)?K.getRowModel().rows.map(e=>(0,a.jsx)(v,{"data-state":e.getIsSelected()&&"selected",className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:e.getVisibleCells().map(e=>(0,a.jsx)(N,{className:"py-4",children:(0,S.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(v,{children:(0,a.jsx)(N,{colSpan:L.length,className:"h-24 text-center text-gray-500",children:"No results."})})})]})}),(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",K.getRowModel().rows.length," of ",r.length," orders"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(C.z,{variant:"outline",size:"sm",onClick:()=>K.previousPage(),disabled:!K.getCanPreviousPage(),className:"px-4 py-2 rounded-md bg-white text-primary-700 border border-primary-300 hover:bg-primary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Previous"}),(0,a.jsx)(C.z,{variant:"outline",size:"sm",onClick:()=>K.nextPage(),disabled:!K.getCanNextPage(),className:"px-4 py-2 rounded-md bg-white text-primary-700 border border-primary-300 hover:bg-primary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Next"})]})]}),(0,a.jsx)(OderStatuModal,{open:c,setOpen:u,setCurrentOrderStatus:w,currentOrderStatus:y,loading:m,handleOrderStatus:handleOrderStatus,selectedPlane:_,setSelectedPlane:z,price:Z,setPrice:V})]})}},44675:function(e,t,r){r.d(t,{z:function(){return d}});var a=r(85893),s=r(67294),l=r(61465),n=r(45139),o=r(22006);let i=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(i({variant:s,size:n,className:r})),ref:t,...c})});d.displayName="Button"},22006:function(e,t,r){r.d(t,{cn:function(){return cn}});var a=r(90512),s=r(98388);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}}]);